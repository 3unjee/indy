#!/bin/sh
set -e

#--------------------------------------------------------------------------------------------------
# Settings
#--------------------------------------------------------------------------------------------------

LivePortrait="$PWD/../../../../../Sky/tools/LivePortrait"

input="$PWD/video/base"

output="$PWD/video"

#--------------------------------------------------------------------------------------------------
# Functions
#--------------------------------------------------------------------------------------------------

run()
{
    if [ $# = 2 ]; then

        sh run.sh "$input/$1.mp4" "$input/$1-sync.mp4" $2
    else
        sh run.sh "$input/$1.mp4" "$input/$1-sync.mp4"
    fi

    name="output/$1--$1-sync"

    mv "$name".mp4        "$output/$1.mp4"
    mv "$name"_concat.mp4 "$output/$1-sync.mp4"
}

#--------------------------------------------------------------------------------------------------
# Run
#--------------------------------------------------------------------------------------------------

cd "$LivePortrait"

run "dialog"
run "dialog2"
