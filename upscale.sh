#!/bin/sh
set -e

#--------------------------------------------------------------------------------------------------
# Functions
#--------------------------------------------------------------------------------------------------

upscale()
{
    name="room/$1"

    echo "------------"
    echo " CONFIGURING"
    echo "------------"

    sh configure.sh "$name" default silent

    echo "----------"
    echo " UPSCALING"
    echo "----------"

    cd "$PWD/dist/$name"/content

    sh upscale.sh

    cd -

    echo "--------"
    echo " PUSHING"
    echo "--------"

    sh push.sh "$name" upscale silent
}

renderBase()
{
    sh render.sh "$1"
}

render()
{
    renderBase "room/$1"
}

#--------------------------------------------------------------------------------------------------
# Syntax
#--------------------------------------------------------------------------------------------------

read -p "Run upscale ? (yes/no) " REPLY

if [ "$REPLY" != "yes" ]; then exit 1; fi

#--------------------------------------------------------------------------------------------------
# Upscale
#--------------------------------------------------------------------------------------------------

#upscale "intro"
#upscale "attic"
#upscale "attic2"
upscale "chase"

#--------------------------------------------------------------------------------------------------
# Render
#--------------------------------------------------------------------------------------------------

#renderBase "movie"

#render "intro"
#render "attic"
#render "attic2"
#render "chase"
